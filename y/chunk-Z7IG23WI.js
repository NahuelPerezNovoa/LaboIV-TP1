import{c,d as E,f as k,j as N,m as U,n as A,t as I}from"./chunk-HWEWCRWD.js";import{d as y}from"./chunk-TVGYTR6V.js";import"./chunk-OZ7M4S3R.js";import{a as P,b as v,c as w,d as S}from"./chunk-I2IZRYSD.js";import"./chunk-GQFFDRHF.js";import{$a as s,Ba as d,Ca as f,Ua as o,Va as i,Wa as g,Ya as u,Z as C,ba as M,bb as O,cb as p,db as h,eb as _,gb as x,ya as b}from"./chunk-UDMSPLU7.js";var B=(()=>{let a=class a{constructor(e,t){this.router=e,this.firestore=t,this.localUserService=C(I),this.mail="",this.contrasenia="",this.notificacion=""}ngOnInit(){let e=this.localUserService.localUser;e!=null&&e!=null&&this.goToHome()}registrar(){if(this.mail!=""&&this.contrasenia!=""){let e=k();E(e,this.mail,this.contrasenia).then(t=>{let n=t.user;this.guardarUsuarioLogueado(n.email),this.goToHome()}).catch(t=>{let n=t.code,l=t.message;switch(n){case c.INVALID_EMAIL:this.mostrarNotificacion("Email inv\xE1lido.");break;case c.EMAIL_EXISTS:this.mostrarNotificacion("Este email ya se encuentra registrado.");break;case c.OPERATION_NOT_ALLOWED:this.mostrarNotificacion("Operaci\xF3n no permitida.");break;case c.WEAK_PASSWORD:this.mostrarNotificacion("Contrase\xF1a d\xE9bil.");break;default:this.mostrarNotificacion("Ha ocurrido un error al registrar. Intente de nuevo mas tarde.");break}})}else this.mostrarNotificacion("Complete ambos campos")}guardarUsuarioLogueado(e){this.localUserService.setActualUser(e);let t=N(this.firestore,"logins");U(t,{fecha:new Date,user:e})}goToHome(){this.router.navigate(["/home"])}mostrarNotificacion(e){this.notificacion=e;let t=document.querySelector(".notification");t.style.visibility="visible"}esconderNotificacion(){this.notificacion="";let e=document.querySelector(".notification");e.style.visibility="hidden"}};a.\u0275fac=function(t){return new(t||a)(f(y),f(A))},a.\u0275cmp=M({type:a,selectors:[["app-registrar"]],standalone:!0,features:[x],decls:19,vars:3,consts:[["href",b`https://fonts.googleapis.com/css?family=Ubuntu:500`,"rel","stylesheet","type","text/css"],[1,"login"],[1,"login-form"],[1,"login-header"],["type","email","placeholder","Mail",3,"ngModelChange","ngModel"],["type","password","placeholder","Contrase\xF1a",3,"ngModelChange","ngModel"],[1,"button","is-link",3,"click"],[1,"notification","is-danger","is-light",2,"visibility","hidden"],[1,"delete",3,"click"]],template:function(t,n){t&1&&(g(0,"link",0),o(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),s(5,"Registrate"),i()(),o(6,"h3"),s(7,"Mail:"),i(),o(8,"input",4),_("ngModelChange",function(r){return h(n.mail,r)||(n.mail=r),r}),i(),g(9,"br"),o(10,"h3"),s(11,"Contrase\xF1a:"),i(),o(12,"input",5),_("ngModelChange",function(r){return h(n.contrasenia,r)||(n.contrasenia=r),r}),i(),g(13,"br"),o(14,"button",6),u("click",function(){return n.registrar()}),s(15,"Registrar"),i()(),o(16,"div",7)(17,"button",8),u("click",function(){return n.esconderNotificacion()}),i(),s(18),i()()),t&2&&(d(8),p("ngModel",n.mail),d(4),p("ngModel",n.contrasenia),d(6),O(" ",n.notificacion," "))},dependencies:[S,P,v,w],styles:["[_nghost-%COMP%]{margin:0;font-family:Ubuntu,sans-serif;background-size:100% 110%;width:10vw}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{margin:0;padding:0}.login[_ngcontent-%COMP%]{margin:0 auto;max-width:500px}.login-header[_ngcontent-%COMP%]{color:#fff;text-align:center;font-size:300%}.login-form[_ngcontent-%COMP%]{border:.5px solid #fff;background:#4facff;border-radius:10px;box-shadow:0 0 10px #000}.login-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:left;margin-left:40px;color:#fff}.login-form[_ngcontent-%COMP%]{box-sizing:border-box;padding-top:15px;padding-bottom:10%;margin:5% auto;text-align:center}.login[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{max-width:400px;width:80%;line-height:3em;font-family:Ubuntu,sans-serif;margin:1em 2em;border-radius:5px;border:2px solid #f2f2f2;outline:none;padding-left:10px}.login-form[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{height:30px;width:100px;background:#fff;border:1px solid #f2f2f2;border-radius:20px;color:#708090;text-transform:uppercase;font-family:Ubuntu,sans-serif;cursor:pointer}.no-access[_ngcontent-%COMP%]{color:#e86850;margin:20px 0 20px -57%;text-decoration:underline;cursor:pointer}.try-again[_ngcontent-%COMP%]{color:#f2f2f2;text-decoration:underline;cursor:pointer}@media only screen and (min-width: 150px) and (max-width: 530px){.login-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:0}.sign-up[_ngcontent-%COMP%], .no-access[_ngcontent-%COMP%]{margin:10px 0}.login-button[_ngcontent-%COMP%]{margin-bottom:10px}}"]});let m=a;return m})();export{B as RegistrarComponent};
